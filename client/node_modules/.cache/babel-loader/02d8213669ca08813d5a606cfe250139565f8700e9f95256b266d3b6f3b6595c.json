{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ValidationPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst iterare_1 = require(\"iterare\");\nconst util_1 = require(\"util\");\nconst decorators_1 = require(\"../decorators\");\nconst core_1 = require(\"../decorators/core\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst load_package_util_1 = require(\"../utils/load-package.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\nlet classValidator = {};\nlet classTransformer = {};\n/**\n * @see [Validation](https://docs.nestjs.com/techniques/validation)\n *\n * @publicApi\n */\nlet ValidationPipe = class ValidationPipe {\n  constructor(options) {\n    options = options || {};\n    const {\n      transform,\n      disableErrorMessages,\n      errorHttpStatusCode,\n      expectedType,\n      transformOptions,\n      validateCustomDecorators,\n      ...validatorOptions\n    } = options;\n    // @see https://github.com/nestjs/nest/issues/10683#issuecomment-1413690508\n    this.validatorOptions = {\n      forbidUnknownValues: false,\n      ...validatorOptions\n    };\n    this.isTransformEnabled = !!transform;\n    this.transformOptions = transformOptions;\n    this.isDetailedOutputDisabled = disableErrorMessages;\n    this.validateCustomDecorators = validateCustomDecorators || false;\n    this.errorHttpStatusCode = errorHttpStatusCode || http_status_enum_1.HttpStatus.BAD_REQUEST;\n    this.expectedType = expectedType;\n    this.exceptionFactory = options.exceptionFactory || this.createExceptionFactory();\n    classValidator = this.loadValidator(options.validatorPackage);\n    classTransformer = this.loadTransformer(options.transformerPackage);\n  }\n  loadValidator(validatorPackage) {\n    return validatorPackage ?? (0, load_package_util_1.loadPackage)('class-validator', 'ValidationPipe', () => require('class-validator'));\n  }\n  loadTransformer(transformerPackage) {\n    return transformerPackage ?? (0, load_package_util_1.loadPackage)('class-transformer', 'ValidationPipe', () => require('class-transformer'));\n  }\n  async transform(value, metadata) {\n    if (this.expectedType) {\n      metadata = {\n        ...metadata,\n        metatype: this.expectedType\n      };\n    }\n    const metatype = metadata.metatype;\n    if (!metatype || !this.toValidate(metadata)) {\n      return this.isTransformEnabled ? this.transformPrimitive(value, metadata) : value;\n    }\n    const originalValue = value;\n    value = this.toEmptyIfNil(value, metatype);\n    const isNil = value !== originalValue;\n    const isPrimitive = this.isPrimitive(value);\n    this.stripProtoKeys(value);\n    let entity = classTransformer.plainToInstance(metatype, value, this.transformOptions);\n    const originalEntity = entity;\n    const isCtorNotEqual = entity.constructor !== metatype;\n    if (isCtorNotEqual && !isPrimitive) {\n      entity.constructor = metatype;\n    } else if (isCtorNotEqual) {\n      // when \"entity\" is a primitive value, we have to temporarily\n      // replace the entity to perform the validation against the original\n      // metatype defined inside the handler\n      entity = {\n        constructor: metatype\n      };\n    }\n    const errors = await this.validate(entity, this.validatorOptions);\n    if (errors.length > 0) {\n      throw await this.exceptionFactory(errors);\n    }\n    if (originalValue === undefined && originalEntity === '') {\n      // Since SWC requires empty string for validation (to avoid an error),\n      // a fallback is needed to revert to the original value (when undefined).\n      // @see https://github.com/nestjs/nest/issues/14430\n      return originalValue;\n    }\n    if (isPrimitive) {\n      // if the value is a primitive value and the validation process has been successfully completed\n      // we have to revert the original value passed through the pipe\n      entity = originalEntity;\n    }\n    if (this.isTransformEnabled) {\n      return entity;\n    }\n    if (isNil) {\n      // if the value was originally undefined or null, revert it back\n      return originalValue;\n    }\n    // we check if the number of keys of the \"validatorOptions\" is higher than 1 (instead of 0)\n    // because the \"forbidUnknownValues\" now fallbacks to \"false\" (in case it wasn't explicitly specified)\n    const shouldTransformToPlain = Object.keys(this.validatorOptions).length > 1;\n    return shouldTransformToPlain ? classTransformer.classToPlain(entity, this.transformOptions) : value;\n  }\n  createExceptionFactory() {\n    return (validationErrors = []) => {\n      if (this.isDetailedOutputDisabled) {\n        return new http_error_by_code_util_1.HttpErrorByCode[this.errorHttpStatusCode]();\n      }\n      const errors = this.flattenValidationErrors(validationErrors);\n      return new http_error_by_code_util_1.HttpErrorByCode[this.errorHttpStatusCode](errors);\n    };\n  }\n  toValidate(metadata) {\n    const {\n      metatype,\n      type\n    } = metadata;\n    if (type === 'custom' && !this.validateCustomDecorators) {\n      return false;\n    }\n    const types = [String, Boolean, Number, Array, Object, Buffer, Date];\n    return !types.some(t => metatype === t) && !(0, shared_utils_1.isNil)(metatype);\n  }\n  transformPrimitive(value, metadata) {\n    if (!metadata.data) {\n      // leave top-level query/param objects unmodified\n      return value;\n    }\n    const {\n      type,\n      metatype\n    } = metadata;\n    if (type !== 'param' && type !== 'query') {\n      return value;\n    }\n    if (metatype === Boolean) {\n      if ((0, shared_utils_1.isUndefined)(value)) {\n        // This is an workaround to deal with optional boolean values since\n        // optional booleans shouldn't be parsed to a valid boolean when\n        // they were not defined\n        return undefined;\n      }\n      // Any fasly value but `undefined` will be parsed to `false`\n      return value === true || value === 'true';\n    }\n    if (metatype === Number) {\n      if ((0, shared_utils_1.isUndefined)(value)) {\n        // This is a workaround to deal with optional numeric values since\n        // optional numerics shouldn't be parsed to a valid number when\n        // they were not defined\n        return undefined;\n      }\n      return +value;\n    }\n    if (metatype === String && !(0, shared_utils_1.isUndefined)(value)) {\n      return String(value);\n    }\n    return value;\n  }\n  toEmptyIfNil(value, metatype) {\n    if (!(0, shared_utils_1.isNil)(value)) {\n      return value;\n    }\n    if (typeof metatype === 'function' || metatype && 'prototype' in metatype && metatype.prototype?.constructor) {\n      return {};\n    }\n    // SWC requires empty string to be returned instead of an empty object\n    // when the value is nil and the metatype is not a class instance, but a plain object (enum, for example).\n    // Otherwise, the error will be thrown.\n    // @see https://github.com/nestjs/nest/issues/12680\n    return '';\n  }\n  stripProtoKeys(value) {\n    if (value == null || typeof value !== 'object' || util_1.types.isTypedArray(value)) {\n      return;\n    }\n    if (Array.isArray(value)) {\n      for (const v of value) {\n        this.stripProtoKeys(v);\n      }\n      return;\n    }\n    delete value.__proto__;\n    for (const key in value) {\n      this.stripProtoKeys(value[key]);\n    }\n  }\n  isPrimitive(value) {\n    return ['number', 'boolean', 'string'].includes(typeof value);\n  }\n  validate(object, validatorOptions) {\n    return classValidator.validate(object, validatorOptions);\n  }\n  flattenValidationErrors(validationErrors) {\n    return (0, iterare_1.iterate)(validationErrors).map(error => this.mapChildrenToValidationErrors(error)).flatten().filter(item => !!item.constraints).map(item => Object.values(item.constraints)).flatten().toArray();\n  }\n  mapChildrenToValidationErrors(error, parentPath) {\n    if (!(error.children && error.children.length)) {\n      return [error];\n    }\n    const validationErrors = [];\n    parentPath = parentPath ? `${parentPath}.${error.property}` : error.property;\n    for (const item of error.children) {\n      if (item.children && item.children.length) {\n        validationErrors.push(...this.mapChildrenToValidationErrors(item, parentPath));\n      }\n      validationErrors.push(this.prependConstraintsWithParentProp(parentPath, item));\n    }\n    return validationErrors;\n  }\n  prependConstraintsWithParentProp(parentPath, error) {\n    const constraints = {};\n    for (const key in error.constraints) {\n      constraints[key] = `${parentPath}.${error.constraints[key]}`;\n    }\n    return {\n      ...error,\n      constraints\n    };\n  }\n};\nexports.ValidationPipe = ValidationPipe;\nexports.ValidationPipe = ValidationPipe = tslib_1.__decorate([(0, core_1.Injectable)(), tslib_1.__param(0, (0, decorators_1.Optional)()), tslib_1.__metadata(\"design:paramtypes\", [Object])], ValidationPipe);","map":{"version":3,"names":["Object","defineProperty","exports","value","ValidationPipe","tslib_1","require","iterare_1","util_1","decorators_1","core_1","http_status_enum_1","http_error_by_code_util_1","load_package_util_1","shared_utils_1","classValidator","classTransformer","constructor","options","transform","disableErrorMessages","errorHttpStatusCode","expectedType","transformOptions","validateCustomDecorators","validatorOptions","forbidUnknownValues","isTransformEnabled","isDetailedOutputDisabled","HttpStatus","BAD_REQUEST","exceptionFactory","createExceptionFactory","loadValidator","validatorPackage","loadTransformer","transformerPackage","loadPackage","metadata","metatype","toValidate","transformPrimitive","originalValue","toEmptyIfNil","isNil","isPrimitive","stripProtoKeys","entity","plainToInstance","originalEntity","isCtorNotEqual","errors","validate","length","undefined","shouldTransformToPlain","keys","classToPlain","validationErrors","HttpErrorByCode","flattenValidationErrors","type","types","String","Boolean","Number","Array","Buffer","Date","some","t","data","isUndefined","prototype","isTypedArray","isArray","v","__proto__","key","includes","object","iterate","map","error","mapChildrenToValidationErrors","flatten","filter","item","constraints","values","toArray","parentPath","children","property","push","prependConstraintsWithParentProp","__decorate","Injectable","__param","Optional","__metadata"],"sources":["C:/Users/Fran/Documents/OlavarraFps/clase1/AFIPNest/proyecto-nombre/node_modules/@nestjs/common/pipes/validation.pipe.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValidationPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst iterare_1 = require(\"iterare\");\nconst util_1 = require(\"util\");\nconst decorators_1 = require(\"../decorators\");\nconst core_1 = require(\"../decorators/core\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst load_package_util_1 = require(\"../utils/load-package.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\nlet classValidator = {};\nlet classTransformer = {};\n/**\n * @see [Validation](https://docs.nestjs.com/techniques/validation)\n *\n * @publicApi\n */\nlet ValidationPipe = class ValidationPipe {\n    constructor(options) {\n        options = options || {};\n        const { transform, disableErrorMessages, errorHttpStatusCode, expectedType, transformOptions, validateCustomDecorators, ...validatorOptions } = options;\n        // @see https://github.com/nestjs/nest/issues/10683#issuecomment-1413690508\n        this.validatorOptions = { forbidUnknownValues: false, ...validatorOptions };\n        this.isTransformEnabled = !!transform;\n        this.transformOptions = transformOptions;\n        this.isDetailedOutputDisabled = disableErrorMessages;\n        this.validateCustomDecorators = validateCustomDecorators || false;\n        this.errorHttpStatusCode = errorHttpStatusCode || http_status_enum_1.HttpStatus.BAD_REQUEST;\n        this.expectedType = expectedType;\n        this.exceptionFactory =\n            options.exceptionFactory || this.createExceptionFactory();\n        classValidator = this.loadValidator(options.validatorPackage);\n        classTransformer = this.loadTransformer(options.transformerPackage);\n    }\n    loadValidator(validatorPackage) {\n        return (validatorPackage ??\n            (0, load_package_util_1.loadPackage)('class-validator', 'ValidationPipe', () => require('class-validator')));\n    }\n    loadTransformer(transformerPackage) {\n        return (transformerPackage ??\n            (0, load_package_util_1.loadPackage)('class-transformer', 'ValidationPipe', () => require('class-transformer')));\n    }\n    async transform(value, metadata) {\n        if (this.expectedType) {\n            metadata = { ...metadata, metatype: this.expectedType };\n        }\n        const metatype = metadata.metatype;\n        if (!metatype || !this.toValidate(metadata)) {\n            return this.isTransformEnabled\n                ? this.transformPrimitive(value, metadata)\n                : value;\n        }\n        const originalValue = value;\n        value = this.toEmptyIfNil(value, metatype);\n        const isNil = value !== originalValue;\n        const isPrimitive = this.isPrimitive(value);\n        this.stripProtoKeys(value);\n        let entity = classTransformer.plainToInstance(metatype, value, this.transformOptions);\n        const originalEntity = entity;\n        const isCtorNotEqual = entity.constructor !== metatype;\n        if (isCtorNotEqual && !isPrimitive) {\n            entity.constructor = metatype;\n        }\n        else if (isCtorNotEqual) {\n            // when \"entity\" is a primitive value, we have to temporarily\n            // replace the entity to perform the validation against the original\n            // metatype defined inside the handler\n            entity = { constructor: metatype };\n        }\n        const errors = await this.validate(entity, this.validatorOptions);\n        if (errors.length > 0) {\n            throw await this.exceptionFactory(errors);\n        }\n        if (originalValue === undefined && originalEntity === '') {\n            // Since SWC requires empty string for validation (to avoid an error),\n            // a fallback is needed to revert to the original value (when undefined).\n            // @see https://github.com/nestjs/nest/issues/14430\n            return originalValue;\n        }\n        if (isPrimitive) {\n            // if the value is a primitive value and the validation process has been successfully completed\n            // we have to revert the original value passed through the pipe\n            entity = originalEntity;\n        }\n        if (this.isTransformEnabled) {\n            return entity;\n        }\n        if (isNil) {\n            // if the value was originally undefined or null, revert it back\n            return originalValue;\n        }\n        // we check if the number of keys of the \"validatorOptions\" is higher than 1 (instead of 0)\n        // because the \"forbidUnknownValues\" now fallbacks to \"false\" (in case it wasn't explicitly specified)\n        const shouldTransformToPlain = Object.keys(this.validatorOptions).length > 1;\n        return shouldTransformToPlain\n            ? classTransformer.classToPlain(entity, this.transformOptions)\n            : value;\n    }\n    createExceptionFactory() {\n        return (validationErrors = []) => {\n            if (this.isDetailedOutputDisabled) {\n                return new http_error_by_code_util_1.HttpErrorByCode[this.errorHttpStatusCode]();\n            }\n            const errors = this.flattenValidationErrors(validationErrors);\n            return new http_error_by_code_util_1.HttpErrorByCode[this.errorHttpStatusCode](errors);\n        };\n    }\n    toValidate(metadata) {\n        const { metatype, type } = metadata;\n        if (type === 'custom' && !this.validateCustomDecorators) {\n            return false;\n        }\n        const types = [String, Boolean, Number, Array, Object, Buffer, Date];\n        return !types.some(t => metatype === t) && !(0, shared_utils_1.isNil)(metatype);\n    }\n    transformPrimitive(value, metadata) {\n        if (!metadata.data) {\n            // leave top-level query/param objects unmodified\n            return value;\n        }\n        const { type, metatype } = metadata;\n        if (type !== 'param' && type !== 'query') {\n            return value;\n        }\n        if (metatype === Boolean) {\n            if ((0, shared_utils_1.isUndefined)(value)) {\n                // This is an workaround to deal with optional boolean values since\n                // optional booleans shouldn't be parsed to a valid boolean when\n                // they were not defined\n                return undefined;\n            }\n            // Any fasly value but `undefined` will be parsed to `false`\n            return value === true || value === 'true';\n        }\n        if (metatype === Number) {\n            if ((0, shared_utils_1.isUndefined)(value)) {\n                // This is a workaround to deal with optional numeric values since\n                // optional numerics shouldn't be parsed to a valid number when\n                // they were not defined\n                return undefined;\n            }\n            return +value;\n        }\n        if (metatype === String && !(0, shared_utils_1.isUndefined)(value)) {\n            return String(value);\n        }\n        return value;\n    }\n    toEmptyIfNil(value, metatype) {\n        if (!(0, shared_utils_1.isNil)(value)) {\n            return value;\n        }\n        if (typeof metatype === 'function' ||\n            (metatype && 'prototype' in metatype && metatype.prototype?.constructor)) {\n            return {};\n        }\n        // SWC requires empty string to be returned instead of an empty object\n        // when the value is nil and the metatype is not a class instance, but a plain object (enum, for example).\n        // Otherwise, the error will be thrown.\n        // @see https://github.com/nestjs/nest/issues/12680\n        return '';\n    }\n    stripProtoKeys(value) {\n        if (value == null ||\n            typeof value !== 'object' ||\n            util_1.types.isTypedArray(value)) {\n            return;\n        }\n        if (Array.isArray(value)) {\n            for (const v of value) {\n                this.stripProtoKeys(v);\n            }\n            return;\n        }\n        delete value.__proto__;\n        for (const key in value) {\n            this.stripProtoKeys(value[key]);\n        }\n    }\n    isPrimitive(value) {\n        return ['number', 'boolean', 'string'].includes(typeof value);\n    }\n    validate(object, validatorOptions) {\n        return classValidator.validate(object, validatorOptions);\n    }\n    flattenValidationErrors(validationErrors) {\n        return (0, iterare_1.iterate)(validationErrors)\n            .map(error => this.mapChildrenToValidationErrors(error))\n            .flatten()\n            .filter(item => !!item.constraints)\n            .map(item => Object.values(item.constraints))\n            .flatten()\n            .toArray();\n    }\n    mapChildrenToValidationErrors(error, parentPath) {\n        if (!(error.children && error.children.length)) {\n            return [error];\n        }\n        const validationErrors = [];\n        parentPath = parentPath\n            ? `${parentPath}.${error.property}`\n            : error.property;\n        for (const item of error.children) {\n            if (item.children && item.children.length) {\n                validationErrors.push(...this.mapChildrenToValidationErrors(item, parentPath));\n            }\n            validationErrors.push(this.prependConstraintsWithParentProp(parentPath, item));\n        }\n        return validationErrors;\n    }\n    prependConstraintsWithParentProp(parentPath, error) {\n        const constraints = {};\n        for (const key in error.constraints) {\n            constraints[key] = `${parentPath}.${error.constraints[key]}`;\n        }\n        return {\n            ...error,\n            constraints,\n        };\n    }\n};\nexports.ValidationPipe = ValidationPipe;\nexports.ValidationPipe = ValidationPipe = tslib_1.__decorate([\n    (0, core_1.Injectable)(),\n    tslib_1.__param(0, (0, decorators_1.Optional)()),\n    tslib_1.__metadata(\"design:paramtypes\", [Object])\n], ValidationPipe);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}